"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.mimicRegistryHooks = mimicRegistryHooks;
/**
 * Mimics the builder registry behavior for a JsiiProject, adding registry and pre-/postSynthesize hooks.
 */
function mimicRegistryHooks(project) {
    // Mimi builder registry from base project as this JsiiProject is not inherited from base project.
    project.builderRegistry = [];
    project.registerBuilder = (builder) => {
        project.builderRegistry?.push(builder);
    };
    project.findBuilderByName = (name) => {
        return project.builderRegistry.find((builder) => builder.constructor.name === name);
    };
    // JsiiProject does ot has pre-/postSynthesize so we need to add it.
    project.preSynthesize = () => {
        for (const builder of project.builderRegistry) {
            builder.preSynthesize();
        }
    };
    project.postSynthesize = () => {
        for (const builder of project.builderRegistry) {
            builder.postSynthesize();
        }
    };
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidXRpbHMuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi9zcmMvanNpaS91dGlscy50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOztBQUtBLGdEQXVCQztBQTFCRDs7R0FFRztBQUNILFNBQWdCLGtCQUFrQixDQUFDLE9BQW9CO0lBQ3JELGtHQUFrRztJQUNqRyxPQUE0QyxDQUFDLGVBQWUsR0FBRyxFQUFFLENBQUM7SUFDbEUsT0FBNEMsQ0FBQyxlQUFlLEdBQUcsQ0FBQyxPQUFnQixFQUFRLEVBQUU7UUFDeEYsT0FBNEMsQ0FBQyxlQUFlLEVBQUUsSUFBSSxDQUFDLE9BQU8sQ0FBQyxDQUFDO0lBQy9FLENBQUMsQ0FBQztJQUNELE9BQTRDLENBQUMsaUJBQWlCLEdBQUcsQ0FBQyxJQUFZLEVBQXVCLEVBQUU7UUFDdEcsT0FBUSxPQUE0QyxDQUFDLGVBQWUsQ0FBQyxJQUFJLENBQ3ZFLENBQUMsT0FBZ0IsRUFBVyxFQUFFLENBQUMsT0FBTyxDQUFDLFdBQVcsQ0FBQyxJQUFJLEtBQUssSUFBSSxDQUNqRSxDQUFDO0lBQ0osQ0FBQyxDQUFDO0lBRUYsb0VBQW9FO0lBQ25FLE9BQTRDLENBQUMsYUFBYSxHQUFHLEdBQVMsRUFBRTtRQUN2RSxLQUFLLE1BQU0sT0FBTyxJQUFLLE9BQTRDLENBQUMsZUFBZSxFQUFFLENBQUM7WUFDcEYsT0FBTyxDQUFDLGFBQWEsRUFBRSxDQUFDO1FBQzFCLENBQUM7SUFDSCxDQUFDLENBQUM7SUFDRCxPQUE0QyxDQUFDLGNBQWMsR0FBRyxHQUFTLEVBQUU7UUFDeEUsS0FBSyxNQUFNLE9BQU8sSUFBSyxPQUE0QyxDQUFDLGVBQWUsRUFBRSxDQUFDO1lBQ3BGLE9BQU8sQ0FBQyxjQUFjLEVBQUUsQ0FBQztRQUMzQixDQUFDO0lBQ0gsQ0FBQyxDQUFDO0FBQ0osQ0FBQyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEpzaWlQcm9qZWN0IH0gZnJvbSAncHJvamVuL2xpYi9jZGsnO1xuaW1wb3J0IHsgQnVpbGRlciwgVHlwZVNjcmlwdFByb2plY3RCYXNlIH0gZnJvbSAnLi4vYmFzZSc7XG4vKipcbiAqIE1pbWljcyB0aGUgYnVpbGRlciByZWdpc3RyeSBiZWhhdmlvciBmb3IgYSBKc2lpUHJvamVjdCwgYWRkaW5nIHJlZ2lzdHJ5IGFuZCBwcmUtL3Bvc3RTeW50aGVzaXplIGhvb2tzLlxuICovXG5leHBvcnQgZnVuY3Rpb24gbWltaWNSZWdpc3RyeUhvb2tzKHByb2plY3Q6IEpzaWlQcm9qZWN0KSB7XG4gIC8vIE1pbWkgYnVpbGRlciByZWdpc3RyeSBmcm9tIGJhc2UgcHJvamVjdCBhcyB0aGlzIEpzaWlQcm9qZWN0IGlzIG5vdCBpbmhlcml0ZWQgZnJvbSBiYXNlIHByb2plY3QuXG4gIChwcm9qZWN0IGFzIHVua25vd24gYXMgVHlwZVNjcmlwdFByb2plY3RCYXNlKS5idWlsZGVyUmVnaXN0cnkgPSBbXTtcbiAgKHByb2plY3QgYXMgdW5rbm93biBhcyBUeXBlU2NyaXB0UHJvamVjdEJhc2UpLnJlZ2lzdGVyQnVpbGRlciA9IChidWlsZGVyOiBCdWlsZGVyKTogdm9pZCA9PiB7XG4gICAgKHByb2plY3QgYXMgdW5rbm93biBhcyBUeXBlU2NyaXB0UHJvamVjdEJhc2UpLmJ1aWxkZXJSZWdpc3RyeT8ucHVzaChidWlsZGVyKTtcbiAgfTtcbiAgKHByb2plY3QgYXMgdW5rbm93biBhcyBUeXBlU2NyaXB0UHJvamVjdEJhc2UpLmZpbmRCdWlsZGVyQnlOYW1lID0gKG5hbWU6IHN0cmluZyk6IEJ1aWxkZXIgfCB1bmRlZmluZWQgPT4ge1xuICAgIHJldHVybiAocHJvamVjdCBhcyB1bmtub3duIGFzIFR5cGVTY3JpcHRQcm9qZWN0QmFzZSkuYnVpbGRlclJlZ2lzdHJ5LmZpbmQoXG4gICAgICAoYnVpbGRlcjogQnVpbGRlcik6IGJvb2xlYW4gPT4gYnVpbGRlci5jb25zdHJ1Y3Rvci5uYW1lID09PSBuYW1lLFxuICAgICk7XG4gIH07XG5cbiAgLy8gSnNpaVByb2plY3QgZG9lcyBvdCBoYXMgcHJlLS9wb3N0U3ludGhlc2l6ZSBzbyB3ZSBuZWVkIHRvIGFkZCBpdC5cbiAgKHByb2plY3QgYXMgdW5rbm93biBhcyBUeXBlU2NyaXB0UHJvamVjdEJhc2UpLnByZVN5bnRoZXNpemUgPSAoKTogdm9pZCA9PiB7XG4gICAgZm9yIChjb25zdCBidWlsZGVyIG9mIChwcm9qZWN0IGFzIHVua25vd24gYXMgVHlwZVNjcmlwdFByb2plY3RCYXNlKS5idWlsZGVyUmVnaXN0cnkpIHtcbiAgICAgIGJ1aWxkZXIucHJlU3ludGhlc2l6ZSgpO1xuICAgIH1cbiAgfTtcbiAgKHByb2plY3QgYXMgdW5rbm93biBhcyBUeXBlU2NyaXB0UHJvamVjdEJhc2UpLnBvc3RTeW50aGVzaXplID0gKCk6IHZvaWQgPT4ge1xuICAgIGZvciAoY29uc3QgYnVpbGRlciBvZiAocHJvamVjdCBhcyB1bmtub3duIGFzIFR5cGVTY3JpcHRQcm9qZWN0QmFzZSkuYnVpbGRlclJlZ2lzdHJ5KSB7XG4gICAgICBidWlsZGVyLnBvc3RTeW50aGVzaXplKCk7XG4gICAgfVxuICB9O1xufVxuIl19