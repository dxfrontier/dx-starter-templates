"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.JsiiProject = void 0;
const projen_1 = require("projen");
const commitlint_1 = require("../base/config/commitlint");
const devcontainer_1 = require("../base/config/devcontainer");
const eslint_1 = require("../base/config/eslint");
const github_1 = require("../base/config/github");
const git_1 = require("../base/config/git");
const jest_1 = require("../base/config/jest");
const options_1 = require("../base/config/options");
const prettier_1 = require("../base/config/prettier");
const vscode_1 = require("../base/config/vscode");
const npm_1 = require("./config/npm");
const typescript_1 = require("./config/typescript");
const utils_1 = require("../util/utils");
const husky_1 = require("./config/husky");
/**
 * Base class for managing project Jsii configuration.
 */
class JsiiProject extends projen_1.cdk.JsiiProject {
    /**
     * Initializes the project.
     * @param options Additional project options.
     */
    constructor(options) {
        super({
            ...options_1.BaseOptions.sharedOptions(options),
            // tsconfig.dev.json needs to be enabled for Jsii Projects
            projenrcTs: true,
            disableTsconfigDev: options.disableTsconfigDev ?? false,
            disableTsconfig: options.disableTsconfig ?? true,
            tsconfig: {
                compilerOptions: {
                    allowImportingTsExtensions: true,
                },
            },
        });
        this.typescript = true;
        this.kind = 'base';
        this.gitConfig = new git_1.GitConfigBase(this);
        this.typescriptConfig = new typescript_1.TypeScriptConfigJsii(this);
        this.npmConfig = new npm_1.NpmConfigJsii(this);
        if (options.prettierEnabled) {
            this.prettierConfig = new prettier_1.PrettierConfigBase(this);
        }
        if (options.devContainerEnabled) {
            this.devContainerConfig = new devcontainer_1.DevContainerConfigBase(this);
        }
        if (options.eslintEnabled) {
            this.eslintConfig = new eslint_1.EsLintConfigBase(this);
        }
        if (options.jestEnabled) {
            this.jestConfig = new jest_1.JestConfigBase(this);
        }
        if (options.vscodeEnabled) {
            this.vscodeConfig = new vscode_1.VsCodeConfigBase(this);
        }
        if (options.githubEnabled) {
            this.githubConfig = new github_1.GitHubConfigBase(this);
        }
        if (options.commitlintEnabled) {
            this.commitlintConfig = new commitlint_1.CommitLintConfigBase(this);
        }
        if (options.huskyEnabled) {
            this.huskyConfig = new husky_1.HuskyConfigJsii(this);
        }
    }
    preSynthesize() {
        utils_1.util.registerConfig(this.components);
        super.preSynthesize();
    }
    postSynthesize() {
        super.postSynthesize();
    }
}
exports.JsiiProject = JsiiProject;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicHJvamVjdC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9qc2lpL3Byb2plY3QudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7O0FBQUEsbUNBQTZCO0FBQzdCLDBEQUFpRTtBQUNqRSw4REFBcUU7QUFDckUsa0RBQXlEO0FBQ3pELGtEQUF5RDtBQUV6RCw0Q0FBbUQ7QUFDbkQsOENBQXFEO0FBQ3JELG9EQUFxRDtBQUNyRCxzREFBNkQ7QUFDN0Qsa0RBQXlEO0FBQ3pELHNDQUE2QztBQUM3QyxvREFBMkQ7QUFDM0QseUNBQXFDO0FBR3JDLDBDQUFpRDtBQTREakQ7O0dBRUc7QUFDSCxNQUFhLFdBQVksU0FBUSxZQUFHLENBQUMsV0FBVztJQThFOUM7OztPQUdHO0lBQ0gsWUFBWSxPQUEyQjtRQUNyQyxLQUFLLENBQUM7WUFDSixHQUFHLHFCQUFXLENBQUMsYUFBYSxDQUFDLE9BQU8sQ0FBQztZQUNyQywwREFBMEQ7WUFDMUQsVUFBVSxFQUFFLElBQUk7WUFDaEIsa0JBQWtCLEVBQUUsT0FBTyxDQUFDLGtCQUFrQixJQUFJLEtBQUs7WUFDdkQsZUFBZSxFQUFFLE9BQU8sQ0FBQyxlQUFlLElBQUksSUFBSTtZQUNoRCxRQUFRLEVBQUU7Z0JBQ1IsZUFBZSxFQUFFO29CQUNmLDBCQUEwQixFQUFFLElBQUk7aUJBQ2pDO2FBQ0Y7U0FDRixDQUFDLENBQUM7UUFFSCxJQUFJLENBQUMsVUFBVSxHQUFHLElBQUksQ0FBQztRQUN2QixJQUFJLENBQUMsSUFBSSxHQUFHLE1BQU0sQ0FBQztRQUVuQixJQUFJLENBQUMsU0FBUyxHQUFHLElBQUksbUJBQWEsQ0FBQyxJQUFJLENBQUMsQ0FBQztRQUN6QyxJQUFJLENBQUMsZ0JBQWdCLEdBQUcsSUFBSSxpQ0FBb0IsQ0FBQyxJQUFJLENBQUMsQ0FBQztRQUN2RCxJQUFJLENBQUMsU0FBUyxHQUFHLElBQUksbUJBQWEsQ0FBQyxJQUFJLENBQUMsQ0FBQztRQUV6QyxJQUFJLE9BQU8sQ0FBQyxlQUFlLEVBQUUsQ0FBQztZQUM1QixJQUFJLENBQUMsY0FBYyxHQUFHLElBQUksNkJBQWtCLENBQUMsSUFBSSxDQUFDLENBQUM7UUFDckQsQ0FBQztRQUNELElBQUksT0FBTyxDQUFDLG1CQUFtQixFQUFFLENBQUM7WUFDaEMsSUFBSSxDQUFDLGtCQUFrQixHQUFHLElBQUkscUNBQXNCLENBQUMsSUFBSSxDQUFDLENBQUM7UUFDN0QsQ0FBQztRQUNELElBQUksT0FBTyxDQUFDLGFBQWEsRUFBRSxDQUFDO1lBQzFCLElBQUksQ0FBQyxZQUFZLEdBQUcsSUFBSSx5QkFBZ0IsQ0FBQyxJQUFJLENBQUMsQ0FBQztRQUNqRCxDQUFDO1FBQ0QsSUFBSSxPQUFPLENBQUMsV0FBVyxFQUFFLENBQUM7WUFDeEIsSUFBSSxDQUFDLFVBQVUsR0FBRyxJQUFJLHFCQUFjLENBQUMsSUFBSSxDQUFDLENBQUM7UUFDN0MsQ0FBQztRQUNELElBQUksT0FBTyxDQUFDLGFBQWEsRUFBRSxDQUFDO1lBQzFCLElBQUksQ0FBQyxZQUFZLEdBQUcsSUFBSSx5QkFBZ0IsQ0FBQyxJQUFJLENBQUMsQ0FBQztRQUNqRCxDQUFDO1FBQ0QsSUFBSSxPQUFPLENBQUMsYUFBYSxFQUFFLENBQUM7WUFDMUIsSUFBSSxDQUFDLFlBQVksR0FBRyxJQUFJLHlCQUFnQixDQUFDLElBQUksQ0FBQyxDQUFDO1FBQ2pELENBQUM7UUFDRCxJQUFJLE9BQU8sQ0FBQyxpQkFBaUIsRUFBRSxDQUFDO1lBQzlCLElBQUksQ0FBQyxnQkFBZ0IsR0FBRyxJQUFJLGlDQUFvQixDQUFDLElBQUksQ0FBQyxDQUFDO1FBQ3pELENBQUM7UUFDRCxJQUFJLE9BQU8sQ0FBQyxZQUFZLEVBQUUsQ0FBQztZQUN6QixJQUFJLENBQUMsV0FBVyxHQUFHLElBQUksdUJBQWUsQ0FBQyxJQUFJLENBQUMsQ0FBQztRQUMvQyxDQUFDO0lBQ0gsQ0FBQztJQUVlLGFBQWE7UUFDM0IsWUFBSSxDQUFDLGNBQWMsQ0FBQyxJQUFJLENBQUMsVUFBVSxDQUFDLENBQUM7UUFDckMsS0FBSyxDQUFDLGFBQWEsRUFBRSxDQUFDO0lBQ3hCLENBQUM7SUFFZSxjQUFjO1FBQzVCLEtBQUssQ0FBQyxjQUFjLEVBQUUsQ0FBQztJQUN6QixDQUFDO0NBQ0Y7QUF6SUQsa0NBeUlDIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgY2RrIH0gZnJvbSAncHJvamVuJztcbmltcG9ydCB7IENvbW1pdExpbnRDb25maWdCYXNlIH0gZnJvbSAnLi4vYmFzZS9jb25maWcvY29tbWl0bGludCc7XG5pbXBvcnQgeyBEZXZDb250YWluZXJDb25maWdCYXNlIH0gZnJvbSAnLi4vYmFzZS9jb25maWcvZGV2Y29udGFpbmVyJztcbmltcG9ydCB7IEVzTGludENvbmZpZ0Jhc2UgfSBmcm9tICcuLi9iYXNlL2NvbmZpZy9lc2xpbnQnO1xuaW1wb3J0IHsgR2l0SHViQ29uZmlnQmFzZSB9IGZyb20gJy4uL2Jhc2UvY29uZmlnL2dpdGh1Yic7XG5pbXBvcnQgeyBIdXNreUNvbmZpZ0Jhc2UgfSBmcm9tICcuLi9iYXNlL2NvbmZpZy9odXNreSc7XG5pbXBvcnQgeyBHaXRDb25maWdCYXNlIH0gZnJvbSAnLi4vYmFzZS9jb25maWcvZ2l0JztcbmltcG9ydCB7IEplc3RDb25maWdCYXNlIH0gZnJvbSAnLi4vYmFzZS9jb25maWcvamVzdCc7XG5pbXBvcnQgeyBCYXNlT3B0aW9ucyB9IGZyb20gJy4uL2Jhc2UvY29uZmlnL29wdGlvbnMnO1xuaW1wb3J0IHsgUHJldHRpZXJDb25maWdCYXNlIH0gZnJvbSAnLi4vYmFzZS9jb25maWcvcHJldHRpZXInO1xuaW1wb3J0IHsgVnNDb2RlQ29uZmlnQmFzZSB9IGZyb20gJy4uL2Jhc2UvY29uZmlnL3ZzY29kZSc7XG5pbXBvcnQgeyBOcG1Db25maWdKc2lpIH0gZnJvbSAnLi9jb25maWcvbnBtJztcbmltcG9ydCB7IFR5cGVTY3JpcHRDb25maWdKc2lpIH0gZnJvbSAnLi9jb25maWcvdHlwZXNjcmlwdCc7XG5pbXBvcnQgeyB1dGlsIH0gZnJvbSAnLi4vdXRpbC91dGlscyc7XG5pbXBvcnQgeyBJUHJvamVjdEtpbmQsIFByb2plY3RLaW5kIH0gZnJvbSAnLi4vdXRpbC90eXBlcy9wcm9qZWN0JztcbmltcG9ydCB7IFR5cGVTY3JpcHRDb25maWdCYXNlIH0gZnJvbSAnLi4vYmFzZS9jb25maWcvdHlwZXNjcmlwdCc7XG5pbXBvcnQgeyBIdXNreUNvbmZpZ0pzaWkgfSBmcm9tICcuL2NvbmZpZy9odXNreSc7XG5cbmV4cG9ydCBpbnRlcmZhY2UgSnNpaVByb2plY3RPcHRpb25zIGV4dGVuZHMgY2RrLkpzaWlQcm9qZWN0T3B0aW9ucyB7XG4gIC8qKlxuICAgKiBXaGV0aGVyIHRvIGVuYWJsZSB0aGUgY29tbWl0bGludCBjb25maWd1cmF0aW9uIGZvciB0aGUgcHJvamVjdC5cbiAgICogSWYgc2V0IHRvIGB0cnVlYCwgY29tbWl0bGludCBjb25maWd1cmF0aW9uIHdpbGwgYmUgZW5hYmxlZC5cbiAgICogQGRlZmF1bHQgZmFsc2VcbiAgICovXG4gIHJlYWRvbmx5IGNvbW1pdGxpbnRFbmFibGVkPzogYm9vbGVhbjtcblxuICAvKipcbiAgICogV2hldGhlciB0byBlbmFibGUgdGhlIGRldiBjb250YWluZXIgY29uZmlndXJhdGlvbiBmb3IgdGhlIHByb2plY3QuXG4gICAqIElmIHNldCB0byBgdHJ1ZWAsIGRldiBjb250YWluZXIgY29uZmlndXJhdGlvbiB3aWxsIGJlIGVuYWJsZWQuXG4gICAqIEBkZWZhdWx0IGZhbHNlXG4gICAqL1xuICByZWFkb25seSBkZXZDb250YWluZXJFbmFibGVkPzogYm9vbGVhbjtcblxuICAvKipcbiAgICogV2hldGhlciB0byBlbmFibGUgdGhlIEVTTGludCBjb25maWd1cmF0aW9uIGZvciB0aGUgcHJvamVjdC5cbiAgICogSWYgc2V0IHRvIGB0cnVlYCwgRVNMaW50IGNvbmZpZ3VyYXRpb24gd2lsbCBiZSBlbmFibGVkLlxuICAgKiBAZGVmYXVsdCBmYWxzZVxuICAgKi9cbiAgcmVhZG9ubHkgZXNsaW50RW5hYmxlZD86IGJvb2xlYW47XG5cbiAgLyoqXG4gICAqIFdoZXRoZXIgdG8gZW5hYmxlIHRoZSBHaXRIdWIgY29uZmlndXJhdGlvbiBmb3IgdGhlIHByb2plY3QuXG4gICAqIElmIHNldCB0byBgdHJ1ZWAsIEdpdEh1Yi1yZWxhdGVkIHNldHRpbmdzIHdpbGwgYmUgY29uZmlndXJlZCAoZS5nLiwgaXNzdWUgdGVtcGxhdGVzLCBQUiB0ZW1wbGF0ZXMpLlxuICAgKiBAZGVmYXVsdCBmYWxzZVxuICAgKi9cbiAgcmVhZG9ubHkgZ2l0aHViRW5hYmxlZD86IGJvb2xlYW47XG5cbiAgLyoqXG4gICAqIFdoZXRoZXIgdG8gZW5hYmxlIHRoZSBIdXNreSBjb25maWd1cmF0aW9uIGZvciB0aGUgcHJvamVjdC5cbiAgICogSWYgc2V0IHRvIGB0cnVlYCwgSHVza3kgaG9va3Mgd2lsbCBiZSBlbmFibGVkIHRvIGVuZm9yY2UgY29kZSBxdWFsaXR5IGNoZWNrcy5cbiAgICogQGRlZmF1bHQgZmFsc2VcbiAgICovXG4gIHJlYWRvbmx5IGh1c2t5RW5hYmxlZD86IGJvb2xlYW47XG5cbiAgLyoqXG4gICAqIFdoZXRoZXIgdG8gZW5hYmxlIHRoZSBKZXN0IGNvbmZpZ3VyYXRpb24gZm9yIHRoZSBwcm9qZWN0LlxuICAgKiBJZiBzZXQgdG8gYHRydWVgLCBKZXN0IHRlc3RpbmcgZnJhbWV3b3JrIHdpbGwgYmUgY29uZmlndXJlZCBmb3IgdGhlIHByb2plY3QuXG4gICAqIEBkZWZhdWx0IGZhbHNlXG4gICAqL1xuICByZWFkb25seSBqZXN0RW5hYmxlZD86IGJvb2xlYW47XG5cbiAgLyoqXG4gICAqIFdoZXRoZXIgdG8gZW5hYmxlIHRoZSBQcmV0dGllciBjb25maWd1cmF0aW9uIGZvciB0aGUgcHJvamVjdC5cbiAgICogSWYgc2V0IHRvIGB0cnVlYCwgUHJldHRpZXIgY29kZSBmb3JtYXR0aW5nIGNvbmZpZ3VyYXRpb24gd2lsbCBiZSBlbmFibGVkLlxuICAgKiBAZGVmYXVsdCBmYWxzZVxuICAgKi9cbiAgcmVhZG9ubHkgcHJldHRpZXJFbmFibGVkPzogYm9vbGVhbjtcblxuICAvKipcbiAgICogV2hldGhlciB0byBlbmFibGUgdGhlIFZTIENvZGUgY29uZmlndXJhdGlvbiBmb3IgdGhlIHByb2plY3QuXG4gICAqIElmIHNldCB0byBgdHJ1ZWAsIFZTIENvZGUgc2V0dGluZ3Mgd2lsbCBiZSBhcHBsaWVkIGZvciB0aGUgcHJvamVjdC5cbiAgICogQGRlZmF1bHQgZmFsc2VcbiAgICovXG4gIHJlYWRvbmx5IHZzY29kZUVuYWJsZWQ/OiBib29sZWFuO1xufVxuXG4vKipcbiAqIEJhc2UgY2xhc3MgZm9yIG1hbmFnaW5nIHByb2plY3QgSnNpaSBjb25maWd1cmF0aW9uLlxuICovXG5leHBvcnQgY2xhc3MgSnNpaVByb2plY3QgZXh0ZW5kcyBjZGsuSnNpaVByb2plY3QgaW1wbGVtZW50cyBJUHJvamVjdEtpbmQge1xuICAvKipcbiAgICogQ29uZmlndXJhdGlvbiBmb3IgY29tbWl0bGludCBzZXR0aW5ncyBpbiB0aGUgcHJvamVjdC5cbiAgICogVGhpcyBwcm9wZXJ0eSBpcyBpbml0aWFsaXplZCBpZiBgY29tbWl0bGludEVuYWJsZWRgIG9wdGlvbiBpcyBwcm92aWRlZCBkdXJpbmcgcHJvamVjdCBjcmVhdGlvbi5cbiAgICovXG4gIHB1YmxpYyByZWFkb25seSBjb21taXRsaW50Q29uZmlnPzogQ29tbWl0TGludENvbmZpZ0Jhc2U7XG5cbiAgLyoqXG4gICAqIENvbmZpZ3VyYXRpb24gZm9yIGRldmVsb3BtZW50IGNvbnRhaW5lciBzZXR0aW5ncyBpbiB0aGUgcHJvamVjdC5cbiAgICogVGhpcyBwcm9wZXJ0eSBpcyBpbml0aWFsaXplZCBpZiBgZGV2Q29udGFpbmVyRW5hYmxlZGAgb3B0aW9uIGlzIHByb3ZpZGVkIGR1cmluZyBwcm9qZWN0IGNyZWF0aW9uLlxuICAgKi9cbiAgcHVibGljIHJlYWRvbmx5IGRldkNvbnRhaW5lckNvbmZpZz86IERldkNvbnRhaW5lckNvbmZpZ0Jhc2U7XG5cbiAgLyoqXG4gICAqIENvbmZpZ3VyYXRpb24gZm9yIEVTTGludCBzZXR0aW5ncyBpbiB0aGUgcHJvamVjdC5cbiAgICogVGhpcyBwcm9wZXJ0eSBpcyBpbml0aWFsaXplZCBpZiBgZXNsaW50RW5hYmxlZGAgb3B0aW9uIGlzIHByb3ZpZGVkIGR1cmluZyBwcm9qZWN0IGNyZWF0aW9uLlxuICAgKi9cbiAgcHVibGljIHJlYWRvbmx5IGVzbGludENvbmZpZz86IEVzTGludENvbmZpZ0Jhc2U7XG5cbiAgLyoqXG4gICAqIENvbmZpZ3VyYXRpb24gZm9yIEdpdCBzZXR0aW5ncyBpbiB0aGUgcHJvamVjdC5cbiAgICogVGhpcyBwcm9wZXJ0eSBpcyBhbHdheXMgaW5pdGlhbGl6ZWQgYXMgYGdpdENvbmZpZ2Agd2hlbiB0aGUgcHJvamVjdCBpcyBjcmVhdGVkLlxuICAgKi9cbiAgcHVibGljIGdpdENvbmZpZz86IEdpdENvbmZpZ0Jhc2U7XG5cbiAgLyoqXG4gICAqIENvbmZpZ3VyYXRpb24gZm9yIEdpdEh1YiBzZXR0aW5ncyBpbiB0aGUgcHJvamVjdC5cbiAgICogVGhpcyBwcm9wZXJ0eSBpcyBpbml0aWFsaXplZCBpZiBgZ2l0aHViRW5hYmxlZGAgb3B0aW9uIGlzIHByb3ZpZGVkIGR1cmluZyBwcm9qZWN0IGNyZWF0aW9uLlxuICAgKi9cbiAgcHVibGljIHJlYWRvbmx5IGdpdGh1YkNvbmZpZz86IEdpdEh1YkNvbmZpZ0Jhc2U7XG5cbiAgLyoqXG4gICAqIENvbmZpZ3VyYXRpb24gZm9yIEh1c2t5IHNldHRpbmdzIGluIHRoZSBwcm9qZWN0LlxuICAgKiBUaGlzIHByb3BlcnR5IGlzIGluaXRpYWxpemVkIGlmIGBodXNreUVuYWJsZWRgIG9wdGlvbiBpcyBwcm92aWRlZCBkdXJpbmcgcHJvamVjdCBjcmVhdGlvbi5cbiAgICovXG4gIHB1YmxpYyByZWFkb25seSBodXNreUNvbmZpZz86IEh1c2t5Q29uZmlnQmFzZTtcblxuICAvKipcbiAgICogQ29uZmlndXJhdGlvbiBmb3IgSmVzdCBzZXR0aW5ncyBpbiB0aGUgcHJvamVjdC5cbiAgICogVGhpcyBwcm9wZXJ0eSBpcyBpbml0aWFsaXplZCBpZiBgamVzdEVuYWJsZWRgIG9wdGlvbiBpcyBwcm92aWRlZCBkdXJpbmcgcHJvamVjdCBjcmVhdGlvbi5cbiAgICovXG4gIHB1YmxpYyByZWFkb25seSBqZXN0Q29uZmlnPzogSmVzdENvbmZpZ0Jhc2U7XG5cbiAgLyoqXG4gICAqIENvbmZpZ3VyYXRpb24gZm9yIE5QTSBzZXR0aW5ncyBpbiB0aGUgcHJvamVjdC5cbiAgICogVGhpcyBwcm9wZXJ0eSBpcyBhbHdheXMgaW5pdGlhbGl6ZWQgYXMgYG5wbUNvbmZpZ2Agd2hlbiB0aGUgcHJvamVjdCBpcyBjcmVhdGVkLlxuICAgKi9cbiAgcHVibGljIHJlYWRvbmx5IG5wbUNvbmZpZz86IE5wbUNvbmZpZ0pzaWk7XG5cbiAgLyoqXG4gICAqIENvbmZpZ3VyYXRpb24gZm9yIFByZXR0aWVyIHNldHRpbmdzIGluIHRoZSBwcm9qZWN0LlxuICAgKiBUaGlzIHByb3BlcnR5IGlzIGluaXRpYWxpemVkIGlmIGBwcmV0dGllckVuYWJsZWRgIG9wdGlvbiBpcyBwcm92aWRlZCBkdXJpbmcgcHJvamVjdCBjcmVhdGlvbi5cbiAgICovXG4gIHB1YmxpYyByZWFkb25seSBwcmV0dGllckNvbmZpZz86IFByZXR0aWVyQ29uZmlnQmFzZTtcblxuICAvKipcbiAgICogQ29uZmlndXJhdGlvbiBmb3IgVlMgQ29kZSBzZXR0aW5ncyBpbiB0aGUgcHJvamVjdC5cbiAgICogVGhpcyBwcm9wZXJ0eSBpcyBpbml0aWFsaXplZCBpZiBgdnNjb2RlRW5hYmxlZGAgb3B0aW9uIGlzIHByb3ZpZGVkIGR1cmluZyBwcm9qZWN0IGNyZWF0aW9uLlxuICAgKi9cbiAgcHVibGljIHJlYWRvbmx5IHZzY29kZUNvbmZpZz86IFZzQ29kZUNvbmZpZ0Jhc2U7XG5cbiAgLyoqXG4gICAqIENvbmZpZ3VyYXRpb24gZm9yIFR5cGVTY3JpcHQgc2V0dGluZ3MgaW4gdGhlIHByb2plY3QuXG4gICAqIFRoaXMgcHJvcGVydHkgaXMgYWx3YXlzIGluaXRpYWxpemVkIGFzIGB0eXBlc2NyaXB0Q29uZmlnYCB3aGVuIHRoZSBwcm9qZWN0IGlzIGNyZWF0ZWQuXG4gICAqL1xuICBwdWJsaWMgdHlwZXNjcmlwdENvbmZpZz86IFR5cGVTY3JpcHRDb25maWdCYXNlO1xuXG4gIC8qKlxuICAgKiBUaGlzIGZsYWcgYWxpZ25zIHdpdGggUHJvamVuIHN0cnVjdHVyZSB1c2luZyBmbGFncyBsaWtlIGBlc2xpbnRgLCBgZGV2Q29udGFpbmVyYCwgLi4uLlxuICAgKiBmb3IgZGVmaW5pbmcgaWYgY29uZmlndXJhdGlvbiBmdW5jdGlvbmFsaXR5IGlzIGVuYWJsZWQgb3Igbm90LiBXaWxsIGFsaWduIHdpdGggYHR5cGVzY3JpcHRFbmFibGVkYFxuICAgKiBJZiBzZXQgdG8gYHRydWVgLCBUeXBlU2NyaXB0LXNwZWNpZmljIHNldHRpbmdzIHdpbGwgYmUgY29uZmlndXJlZCBmb3IgdGhlIHByb2plY3QuXG4gICAqIElmIHNldCB0byBgZmFsc2VgIFR5cGVTY3JpcHQgd2lsbCBiZSBjb21wbGV0ZWx5IHJlbW92ZWQgZnJvbSB0aGUgcHJvamVjdCBhc1xuICAgKiBQcm9qZW4gcHJvamVjdHMgdXNlZCBpbiB0aGlzIGNvbnRleHQgYXJlIGFsd2F5cyByZWx5aW5nIG9uIFR5cGVTY3JpcHQuXG4gICAqL1xuICBwdWJsaWMgdHlwZXNjcmlwdD86IGJvb2xlYW47XG5cbiAgcHVibGljIGtpbmQ6IFByb2plY3RLaW5kO1xuXG4gIC8qKlxuICAgKiBJbml0aWFsaXplcyB0aGUgcHJvamVjdC5cbiAgICogQHBhcmFtIG9wdGlvbnMgQWRkaXRpb25hbCBwcm9qZWN0IG9wdGlvbnMuXG4gICAqL1xuICBjb25zdHJ1Y3RvcihvcHRpb25zOiBKc2lpUHJvamVjdE9wdGlvbnMpIHtcbiAgICBzdXBlcih7XG4gICAgICAuLi5CYXNlT3B0aW9ucy5zaGFyZWRPcHRpb25zKG9wdGlvbnMpLFxuICAgICAgLy8gdHNjb25maWcuZGV2Lmpzb24gbmVlZHMgdG8gYmUgZW5hYmxlZCBmb3IgSnNpaSBQcm9qZWN0c1xuICAgICAgcHJvamVucmNUczogdHJ1ZSxcbiAgICAgIGRpc2FibGVUc2NvbmZpZ0Rldjogb3B0aW9ucy5kaXNhYmxlVHNjb25maWdEZXYgPz8gZmFsc2UsXG4gICAgICBkaXNhYmxlVHNjb25maWc6IG9wdGlvbnMuZGlzYWJsZVRzY29uZmlnID8/IHRydWUsXG4gICAgICB0c2NvbmZpZzoge1xuICAgICAgICBjb21waWxlck9wdGlvbnM6IHtcbiAgICAgICAgICBhbGxvd0ltcG9ydGluZ1RzRXh0ZW5zaW9uczogdHJ1ZSxcbiAgICAgICAgfSxcbiAgICAgIH0sXG4gICAgfSk7XG5cbiAgICB0aGlzLnR5cGVzY3JpcHQgPSB0cnVlO1xuICAgIHRoaXMua2luZCA9ICdiYXNlJztcblxuICAgIHRoaXMuZ2l0Q29uZmlnID0gbmV3IEdpdENvbmZpZ0Jhc2UodGhpcyk7XG4gICAgdGhpcy50eXBlc2NyaXB0Q29uZmlnID0gbmV3IFR5cGVTY3JpcHRDb25maWdKc2lpKHRoaXMpO1xuICAgIHRoaXMubnBtQ29uZmlnID0gbmV3IE5wbUNvbmZpZ0pzaWkodGhpcyk7XG5cbiAgICBpZiAob3B0aW9ucy5wcmV0dGllckVuYWJsZWQpIHtcbiAgICAgIHRoaXMucHJldHRpZXJDb25maWcgPSBuZXcgUHJldHRpZXJDb25maWdCYXNlKHRoaXMpO1xuICAgIH1cbiAgICBpZiAob3B0aW9ucy5kZXZDb250YWluZXJFbmFibGVkKSB7XG4gICAgICB0aGlzLmRldkNvbnRhaW5lckNvbmZpZyA9IG5ldyBEZXZDb250YWluZXJDb25maWdCYXNlKHRoaXMpO1xuICAgIH1cbiAgICBpZiAob3B0aW9ucy5lc2xpbnRFbmFibGVkKSB7XG4gICAgICB0aGlzLmVzbGludENvbmZpZyA9IG5ldyBFc0xpbnRDb25maWdCYXNlKHRoaXMpO1xuICAgIH1cbiAgICBpZiAob3B0aW9ucy5qZXN0RW5hYmxlZCkge1xuICAgICAgdGhpcy5qZXN0Q29uZmlnID0gbmV3IEplc3RDb25maWdCYXNlKHRoaXMpO1xuICAgIH1cbiAgICBpZiAob3B0aW9ucy52c2NvZGVFbmFibGVkKSB7XG4gICAgICB0aGlzLnZzY29kZUNvbmZpZyA9IG5ldyBWc0NvZGVDb25maWdCYXNlKHRoaXMpO1xuICAgIH1cbiAgICBpZiAob3B0aW9ucy5naXRodWJFbmFibGVkKSB7XG4gICAgICB0aGlzLmdpdGh1YkNvbmZpZyA9IG5ldyBHaXRIdWJDb25maWdCYXNlKHRoaXMpO1xuICAgIH1cbiAgICBpZiAob3B0aW9ucy5jb21taXRsaW50RW5hYmxlZCkge1xuICAgICAgdGhpcy5jb21taXRsaW50Q29uZmlnID0gbmV3IENvbW1pdExpbnRDb25maWdCYXNlKHRoaXMpO1xuICAgIH1cbiAgICBpZiAob3B0aW9ucy5odXNreUVuYWJsZWQpIHtcbiAgICAgIHRoaXMuaHVza3lDb25maWcgPSBuZXcgSHVza3lDb25maWdKc2lpKHRoaXMpO1xuICAgIH1cbiAgfVxuXG4gIHB1YmxpYyBvdmVycmlkZSBwcmVTeW50aGVzaXplKCk6IHZvaWQge1xuICAgIHV0aWwucmVnaXN0ZXJDb25maWcodGhpcy5jb21wb25lbnRzKTtcbiAgICBzdXBlci5wcmVTeW50aGVzaXplKCk7XG4gIH1cblxuICBwdWJsaWMgb3ZlcnJpZGUgcG9zdFN5bnRoZXNpemUoKTogdm9pZCB7XG4gICAgc3VwZXIucG9zdFN5bnRoZXNpemUoKTtcbiAgfVxufVxuIl19